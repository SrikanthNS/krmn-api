(this["webpackJsonpKRMN-UI"]=this["webpackJsonpKRMN-UI"]||[]).push([[0],{130:function(e,t,n){},230:function(e,t,n){"use strict";n.r(t);var c=n(1),s=n.n(c),r=n(47),a=n.n(r),i=n(2),l=n(4),o=(n(109),n(6)),d=n(14),u=n(32),j=n.n(u),b=n(93),m=n.n(b).a.create({baseURL:"/api",headers:{"Content-type":"application/json"}});function p(){var e=JSON.parse(localStorage.getItem("user"));return e&&e.accessToken?{Authorization:"Bearer "+e.accessToken}:{}}var h,O,f,x={getAll:function(){return m.get("/tasks",{headers:p()})},get:function(e){return m.get("/tasks/".concat(e),{headers:p()})},create:function(e){return m.post("/tasks",e,{headers:p()})},update:function(e,t){return m.put("/tasks/".concat(e),t,{headers:p()})},remove:function(e){return m.delete("/tasks/".concat(e),{headers:p()})},removeAll:function(){return m.delete("/tasks",{headers:p()})},findByDesc:function(e){return m.get("/tasks?description=".concat(e),{headers:p()})},getCurrentUserTasks:function(){return m.get("/user/tasks",{headers:p()})}},v=n(9),g=n(3),N=n.n(g),w=n(12),k=n(7),S=Object(k.c)({name:"message",initialState:{},reducers:{setMessage:function(e,t){return{message:t.payload}},clearMessage:function(){return{message:""}}}}),y=S.reducer,I=S.actions,T=I.setMessage,C=I.clearMessage,A=y,D=Object(k.b)("task/create",function(){var e=Object(w.a)(N.a.mark((function e(t,n){var c,s,r,a,i,l,o,d;return N.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return c=t.description,s=t.minutesSpent,r=t.date,a=t.completed,i=t.clientId,l=t.reviewerId,e.prev=1,e.next=4,x.create({description:c,minutesSpent:s,date:r,completed:a,clientId:i,reviewerId:l});case 4:return o=e.sent,e.abrupt("return",o.data);case 8:return e.prev=8,e.t0=e.catch(1),d=e.t0.response&&e.t0.response.data&&e.t0.response.data.message||e.t0.message||e.t0.toString(),n.dispatch(T(d)),e.abrupt("return",n.rejectWithValue());case 13:case"end":return e.stop()}}),e,null,[[1,8]])})));return function(t,n){return e.apply(this,arguments)}}()),E=Object(k.b)("Tasks/retrieve",Object(w.a)(N.a.mark((function e(){var t;return N.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,x.getAll();case 2:return t=e.sent,e.abrupt("return",t.data);case 4:case"end":return e.stop()}}),e)})))),L=Object(k.b)("currentUsertasks/retrieve",Object(w.a)(N.a.mark((function e(){var t;return N.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,x.getAll();case 2:return t=e.sent,e.abrupt("return",t.data);case 4:case"end":return e.stop()}}),e)})))),F=Object(k.b)("Tasks/update",function(){var e=Object(w.a)(N.a.mark((function e(t){var n,c,s;return N.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=t.id,c=t.data,e.next=3,x.update(n,c);case 3:return s=e.sent,e.abrupt("return",s.data);case 5:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()),R=Object(k.b)("Tasks/delete",function(){var e=Object(w.a)(N.a.mark((function e(t){var n;return N.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=t.id,e.next=3,x.remove(n);case 3:return e.abrupt("return",{id:n});case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()),q=Object(k.b)("Tasks/deleteAll",Object(w.a)(N.a.mark((function e(){var t;return N.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,x.removeAll();case 2:return t=e.sent,e.abrupt("return",t.data);case 4:case"end":return e.stop()}}),e)})))),M=Object(k.b)("Tasks/findByTitle",function(){var e=Object(w.a)(N.a.mark((function e(t){var n,c;return N.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=t.description,e.next=3,x.findByDesc(n);case 3:return c=e.sent,e.abrupt("return",c.data);case 5:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()),U=Object(k.c)({name:"Task",initialState:[],extraReducers:(h={},Object(o.a)(h,D.fulfilled,(function(e,t){e.push(t.payload)})),Object(o.a)(h,E.fulfilled,(function(e,t){return Object(v.a)(t.payload)})),Object(o.a)(h,L.fulfilled,(function(e,t){return Object(v.a)(t.payload)})),Object(o.a)(h,F.fulfilled,(function(e,t){var n=e.findIndex((function(e){return e.id===t.payload.id}));e[n]=Object(d.a)(Object(d.a)({},e[n]),t.payload)})),Object(o.a)(h,R.fulfilled,(function(e,t){var n=e.findIndex((function(e){return e.id===t.payload.id}));e.splice(n,1)})),Object(o.a)(h,q.fulfilled,(function(e,t){return[]})),Object(o.a)(h,M.fulfilled,(function(e,t){return Object(v.a)(t.payload)})),h)}).reducer,B=n(0),Y=function(e){var t=Object(i.c)((function(e){return e.client})),n=Object(i.c)((function(e){return e.user})).reviewers,s=Object(c.useState)({id:null,clientId:null,date:null,description:"",minutesSpent:null,completed:!1,reviewerId:null}),r=Object(l.a)(s,2),a=r[0],u=r[1],b=Object(c.useState)(""),m=Object(l.a)(b,2),p=m[0],h=m[1],O=Object(i.b)();Object(c.useEffect)((function(){var t;t=e.match.params.id,x.get(t).then((function(e){u(e.data)})).catch((function(e){console.log(e)}))}),[e.match.params.id]);var f=function(e){var t=e.target,n=t.name,c=t.value;u(Object(d.a)(Object(d.a)({},a),{},Object(o.a)({},n,c)))},v=function(e){var t={id:a.id,clientId:a.clientId,reviewerId:a.reviewerId,description:a.description,completed:e,minutesSpent:a.minutesSpent,date:a.date};O(F({id:a.id,data:t})).unwrap().then((function(t){console.log(t),u(Object(d.a)(Object(d.a)({},a),{},{completed:e},!e&&{reviewerId:null})),h("The status was updated successfully!")})).catch((function(e){console.log(e)}))};return Object(B.jsx)("div",{children:a?Object(B.jsxs)("div",{className:"edit-form",children:[Object(B.jsx)("h4",{children:"Task"}),Object(B.jsxs)("form",{children:[Object(B.jsxs)("div",{className:"form-group",children:[Object(B.jsx)("label",{htmlFor:"client",children:"Choose client:"}),Object(B.jsxs)("select",{className:"form-control",onChange:f,name:"clientId",id:"clients",children:[Object(B.jsx)("option",{value:"",children:"Select Client"}),t.map((function(e){return Object(B.jsx)("option",{selected:a.clientId===e.id,value:e.id,children:e.name},"client-".concat(e.id))}))]})]}),Object(B.jsxs)("div",{className:"form-group",children:[Object(B.jsx)("label",{htmlFor:"taskDate",children:"Date:"}),Object(B.jsx)("input",{className:"form-control",type:"date",value:j()(a.date).format("YYYY-MM-DD"),id:"taskDate",name:"date",onChange:f})]}),Object(B.jsxs)("div",{className:"form-group",children:[Object(B.jsx)("label",{htmlFor:"description",children:"Description"}),Object(B.jsx)("input",{type:"text",className:"form-control",id:"description",name:"description",value:a.description,onChange:f})]}),Object(B.jsxs)("div",{className:"form-group",children:[Object(B.jsx)("label",{htmlFor:"minutesSpent",children:"Time Spent:"}),Object(B.jsx)("input",{type:"number",className:"form-control",id:"minutesSpent",required:!0,value:a.minutesSpent||"",onChange:f,name:"minutesSpent"})]}),Object(B.jsxs)("div",{className:"form-group",children:[Object(B.jsx)("label",{children:Object(B.jsx)("strong",{children:"Status:"})}),a.completed?"Completed":"In-progress"]}),a.completed&&Object(B.jsxs)("div",{className:"form-group",children:[Object(B.jsx)("label",{htmlFor:"reviewers",children:"Reviewer:"}),Object(B.jsxs)("select",{className:"form-control",onChange:f,name:"reviewerId",id:"reviewers",children:[Object(B.jsx)("option",{value:null,children:"Select Reviewer"}),n.map((function(e){return Object(B.jsx)("option",{selected:a.reviewerId===e.id,value:e.id,children:e.username},"reviewer-".concat(e.id))}))]})]})]}),a.completed?Object(B.jsx)("button",{className:"btn btn-md btn-primary mr-2",onClick:function(){return v(!1)},children:"In-Progress"}):Object(B.jsx)("button",{className:"btn btn-md btn-info mr-2",onClick:function(){return v(!0)},children:"Completed"}),Object(B.jsx)("button",{className:"btn btn-md btn-danger mr-2",onClick:function(){O(R({id:a.id})).unwrap().then((function(){e.history.push("/tasks")})).catch((function(e){console.log(e)}))},children:"Delete"}),Object(B.jsx)("button",{type:"submit",className:"btn btn-md mr-2 btn-success",onClick:function(){O(F({id:a.id,data:a})).unwrap().then((function(e){console.log(e),h("The task was updated successfully!")})).catch((function(e){console.log(e)}))},children:"Update"}),Object(B.jsx)("p",{children:p})]}):Object(B.jsxs)("div",{children:[Object(B.jsx)("br",{}),Object(B.jsx)("p",{children:"Please click on a Task to view..."})]})})},P=n(16),V=n(10),J=(n(130),{on:function(e,t){document.addEventListener(e,(function(e){return t(e.detail)}))},dispatch:function(e,t){document.dispatchEvent(new CustomEvent(e,{detail:t}))},remove:function(e,t){document.removeEventListener(e,t)}}),W={getAll:function(){return m.get("/clients")}},_=Object(k.b)("clients/retrieve",Object(w.a)(N.a.mark((function e(){var t;return N.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,W.getAll();case 2:return t=e.sent,e.abrupt("return",t.data);case 4:case"end":return e.stop()}}),e)})))),K=Object(k.c)({name:"client",initialState:[],extraReducers:Object(o.a)({},_.fulfilled,(function(e,t){return Object(v.a)(t.payload)}))}).reducer,z={getPublicContent:function(){return m.get("/all")},getUserBoard:function(){return m.get("/user",{headers:p()})},getModeratorBoard:function(){return m.get("/mod",{headers:p()})},getAdminBoard:function(){return m.get("/admin",{headers:p()})},retrieveReviewers:function(){return m.get("/reviewer")},retrieveAllUsers:function(){return m.get("/userList",{headers:p()})}},H=Object(k.b)("users/reviewer",Object(w.a)(N.a.mark((function e(){var t;return N.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,z.retrieveReviewers();case 2:return t=e.sent,e.abrupt("return",t.data);case 4:case"end":return e.stop()}}),e)})))),G=Object(k.b)("users/list",Object(w.a)(N.a.mark((function e(){var t;return N.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,z.retrieveAllUsers();case 2:return t=e.sent,e.abrupt("return",t.data);case 4:case"end":return e.stop()}}),e)})))),Q=Object(k.c)({name:"client",initialState:{reviewers:[],users:[]},extraReducers:(O={},Object(o.a)(O,H.fulfilled,(function(e,t){e.reviewers=t.payload})),Object(o.a)(O,G.fulfilled,(function(e,t){e.users=t.payload})),O)}).reducer,X=n(8),Z=n(17),$=function(e){var t=Object(i.c)((function(e){return e.client})),n=Object(i.c)((function(e){return e.user})).reviewers,s=Object(c.useState)(!1),r=Object(l.a)(s,2),a=r[0],u=r[1],b={description:"",completed:!1,date:j()().format("YYYY-MM-DD"),clientId:"",reviewerId:null,minutesSpent:""},m=Object(c.useState)(b),p=Object(l.a)(m,2),h=p[0],O=p[1],f=Object(c.useState)(!1),x=Object(l.a)(f,2),v=x[0],g=x[1],N=Object(i.c)((function(e){return e.message})).message,w=Object(i.b)();Object(c.useEffect)((function(){w(C())}),[w]);var k=function(e){var t=e.target,n=t.name,c=t.value;O(Object(d.a)(Object(d.a)({},h),{},Object(o.a)({},n,c)))},S=function(e,t){e.preventDefault(),u(t),O(Object(d.a)(Object(d.a)({},h),{},{completed:t}))},y=Z.b().shape({clientId:Z.c().required("This field is required!"),description:Z.c().required("This field is required!"),minutesSpent:Z.a().required("This field is required!")});return Object(B.jsx)(X.d,{initialValues:b,validationSchema:y,onSubmit:function(t){var n=t.description,c=t.minutesSpent,s=t.clientId;g(!0),e.saveTask(Object(d.a)(Object(d.a)({},h),{},{description:n,minutesSpent:c,clientId:s})).then((function(){g(!1)}))},children:Object(B.jsx)(X.c,{children:Object(B.jsxs)("div",{children:[N&&Object(B.jsx)("div",{className:"form-group",children:Object(B.jsx)("div",{className:"alert alert-danger",role:"alert",children:N})}),Object(B.jsxs)("div",{className:"form-group",children:[Object(B.jsxs)("label",{htmlFor:"client",children:["Choose client",Object(B.jsx)("sup",{className:"text-center text-danger",children:"*"}),":"]}),Object(B.jsxs)(X.b,{as:"select",className:"form-control",name:"clientId",id:"clientId",children:[Object(B.jsx)("option",{value:"",children:"Select Client"}),t.map((function(e){return Object(B.jsx)("option",{value:e.id,children:e.name},"client-".concat(e.id))}))]}),Object(B.jsx)(X.a,{name:"description",component:"div",className:"alert alert-danger"})]}),Object(B.jsxs)("div",{className:"form-group",children:[Object(B.jsxs)("label",{htmlFor:"taskDate",children:["Date",Object(B.jsx)("sup",{className:"text-center text-danger",children:"*"}),":"]}),Object(B.jsx)("input",{className:"form-control",type:"date",value:h.date,id:"taskDate",name:"date",onChange:k})]}),Object(B.jsxs)("div",{className:"form-group",children:[Object(B.jsxs)("label",{htmlFor:"description",children:["Description",Object(B.jsx)("sup",{className:"text-center text-danger",children:"*"}),":"]}),Object(B.jsx)(X.b,{type:"text",className:"form-control",id:"description",name:"description"}),Object(B.jsx)(X.a,{name:"description",component:"div",className:"alert alert-danger"})]}),Object(B.jsxs)("div",{className:"form-group",children:[Object(B.jsxs)("label",{htmlFor:"minutesSpent",children:["Time Spent",Object(B.jsx)("sup",{className:"text-center text-danger",children:"*"}),":"]}),Object(B.jsx)(X.b,{type:"number",className:"form-control",id:"minutesSpent",name:"minutesSpent"}),Object(B.jsx)(X.a,{name:"minutesSpent",component:"div",className:"alert alert-danger"})]}),Object(B.jsxs)("div",{className:"form-group",children:[Object(B.jsxs)("label",{children:["Status",Object(B.jsx)("sup",{className:"text-center text-danger",children:"*"}),":"]}),Object(B.jsxs)("button",{className:"btn btn-md btn-info mr-2",onClick:function(e){return S(e,!a)},children:["In-progress ",!a&&Object(B.jsx)("input",{type:"checkbox",defaultChecked:!0})]}),Object(B.jsxs)("button",{className:"btn btn-md mr-2 btn-primary",onClick:function(e){return S(e,!a)},children:["completed ",a&&Object(B.jsx)("input",{type:"checkbox",defaultChecked:!0})]})]}),a&&Object(B.jsxs)("div",{className:"form-group",children:[Object(B.jsxs)("label",{htmlFor:"reviewers",children:["Reviewer By: ",Object(B.jsx)("small",{className:"text-center text-muted",children:"(optional)"}),": "]}),Object(B.jsxs)("select",{className:"form-control",onChange:k,name:"reviewerId",id:"reviewers",children:[Object(B.jsx)("option",{value:null,children:"Select Reviewer"}),n.map((function(e){return Object(B.jsx)("option",{value:e.id,children:e.username},"reviewer-".concat(e.id))}))]})]}),Object(B.jsx)("div",{className:"form-group",children:Object(B.jsxs)("button",{type:"submit",className:"btn btn-primary btn-block",children:[v&&!N&&Object(B.jsx)("span",{className:"spinner-border spinner-border-sm"}),Object(B.jsx)("span",{children:"Submit"})]})})]})})})},ee=function(){var e=Object(c.useState)(!1),t=Object(l.a)(e,2),n=t[0],s=t[1],r=Object(c.useState)([]),a=Object(l.a)(r,2),o=a[0],d=a[1],u=Object(i.b)(),j=function(e){var t=e.description,n=e.completed,c=e.date,r=e.minutesSpent,a=e.reviewerId,i=e.clientId;u(D({description:t,date:c,completed:n,minutesSpent:r,reviewerId:a,clientId:i})).unwrap().then((function(){d([]),s(!0)})).catch((function(e){console.log("\ud83d\ude80 ~ file: AddTask.js ~ line 34 ~ saveTask ~ e",e.message)}))},b=Object(c.useCallback)(Object(w.a)(N.a.mark((function e(){return N.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:u(_()),u(H()),d([Object(B.jsx)($,{saveTask:j},"task-1")]);case 3:case"end":return e.stop()}}),e)}))),[u]);Object(c.useEffect)((function(){b()}),[b]);return Object(B.jsx)("div",{className:"submit-form",children:n?Object(B.jsxs)("div",{children:[Object(B.jsx)("h4",{children:"You submitted successfully!"}),Object(B.jsx)("button",{className:"btn btn-success",onClick:function(e,t){return d([].concat(Object(v.a)(o),[Object(B.jsx)($,{saveTask:j},"task1")])),void s(!1)},children:"Add"})]}):Object(B.jsx)("div",{className:"row",children:Object(B.jsx)("div",{className:"col-md-12",style:{display:"flex",flexDirection:"column"},children:o.map((function(e){return e}))})})})},te=function(){var e=Object(c.useState)(""),t=Object(l.a)(e,2),n=t[0],s=t[1];return Object(c.useEffect)((function(){z.getAdminBoard().then((function(e){s(e.data)}),(function(e){var t=e.response&&e.response.data&&e.response.data.message||e.message||e.toString();s(t),e.response&&401===e.response.status&&J.dispatch("logout")}))}),[]),Object(B.jsx)("div",{className:"container",children:Object(B.jsx)("header",{className:"jumbotron",children:Object(B.jsx)("h3",{children:n})})})},ne=function(){var e=Object(c.useState)(""),t=Object(l.a)(e,2),n=t[0],s=t[1];return Object(c.useEffect)((function(){z.getModeratorBoard().then((function(e){s(e.data)}),(function(e){var t=e.response&&e.response.data&&e.response.data.message||e.message||e.toString();s(t),e.response&&401===e.response.status&&J.dispatch("logout")}))}),[]),Object(B.jsx)("div",{className:"container",children:Object(B.jsx)("header",{className:"jumbotron",children:Object(B.jsx)("h3",{children:n})})})},ce=function(){return Object(B.jsxs)("div",{className:"row",children:[Object(B.jsx)("div",{className:"col-sm-12",children:Object(B.jsx)("div",{className:"card",children:Object(B.jsxs)("div",{className:"card-body",children:[Object(B.jsx)("h5",{className:"card-title",children:"Thought for the Day!"}),Object(B.jsxs)("p",{className:"card-text",children:["Failures are the stepping stones for ",Object(B.jsx)("span",{style:{color:"green"},children:"success"})]}),Object(B.jsx)("button",{href:"#",className:"btn btn-primary",children:"Have a nice day"})]})})}),Object(B.jsx)("div",{className:"col-sm-12",children:Object(B.jsx)("div",{className:"card",children:Object(B.jsxs)("div",{className:"card-body",children:[Object(B.jsx)("h5",{className:"card-title",children:"Action Items for December"}),Object(B.jsx)("p",{className:"card-text",children:"With supporting text below as a natural lead-in to additional content."})]})})})]})},se={register:function(e,t,n){return m.post("auth/signup",{username:e,email:t,password:n})},login:function(e,t){return m.post("auth/signin",{username:e,password:t}).then((function(e){return e.data.accessToken&&localStorage.setItem("user",JSON.stringify(e.data)),e.data}))},logout:function(){localStorage.removeItem("user")}},re=JSON.parse(localStorage.getItem("user")),ae=Object(k.b)("auth/register",function(){var e=Object(w.a)(N.a.mark((function e(t,n){var c,s,r,a,i;return N.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return c=t.username,s=t.email,r=t.password,e.prev=1,e.next=4,se.register(c,s,r);case 4:return a=e.sent,n.dispatch(T(a.data.message)),e.abrupt("return",a.data);case 9:return e.prev=9,e.t0=e.catch(1),i=e.t0.response&&e.t0.response.data&&e.t0.response.data.message||e.t0.message||e.t0.toString(),n.dispatch(T(i)),e.abrupt("return",n.rejectWithValue());case 14:case"end":return e.stop()}}),e,null,[[1,9]])})));return function(t,n){return e.apply(this,arguments)}}()),ie=Object(k.b)("auth/login",function(){var e=Object(w.a)(N.a.mark((function e(t,n){var c,s,r,a;return N.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return c=t.username,s=t.password,e.prev=1,e.next=4,se.login(c,s);case 4:return r=e.sent,e.abrupt("return",{user:r});case 8:return e.prev=8,e.t0=e.catch(1),a=e.t0.response&&e.t0.response.data&&e.t0.response.data.message||e.t0.message||e.t0.toString(),n.dispatch(T(a)),e.abrupt("return",n.rejectWithValue());case 13:case"end":return e.stop()}}),e,null,[[1,8]])})));return function(t,n){return e.apply(this,arguments)}}()),le=Object(k.b)("auth/logout",(function(){se.logout()})),oe=re?{isLoggedIn:!0,user:re}:{isLoggedIn:!1,user:null},de=Object(k.c)({name:"auth",initialState:oe,extraReducers:(f={},Object(o.a)(f,ae.fulfilled,(function(e,t){e.isLoggedIn=!1})),Object(o.a)(f,ae.rejected,(function(e,t){e.isLoggedIn=!1})),Object(o.a)(f,ie.fulfilled,(function(e,t){e.isLoggedIn=!0,e.user=t.payload.user})),Object(o.a)(f,ie.rejected,(function(e,t){e.isLoggedIn=!1,e.user=null})),Object(o.a)(f,le.fulfilled,(function(e,t){e.isLoggedIn=!1,e.user=null})),f)}).reducer,ue=function(e){var t=Object(c.useState)(!1),n=Object(l.a)(t,2),s=n[0],r=n[1],a=Object(i.c)((function(e){return e.auth})).isLoggedIn,o=Object(i.c)((function(e){return e.message})).message,d=Object(i.b)();Object(c.useEffect)((function(){d(C())}),[d]);var u=Z.b().shape({username:Z.c().required("This field is required!"),password:Z.c().required("This field is required!")});return a?Object(B.jsx)(V.a,{to:"/profile"}):Object(B.jsxs)("div",{className:"col-md-12 login-form",children:[Object(B.jsxs)("div",{className:"card card-container",children:[Object(B.jsx)("img",{src:"//ssl.gstatic.com/accounts/ui/avatar_2x.png",alt:"profile-img",className:"profile-img-card"}),Object(B.jsx)(X.d,{initialValues:{username:"",password:""},validationSchema:u,onSubmit:function(t){var n=t.username,c=t.password;r(!0),d(ie({username:n,password:c})).unwrap().then((function(){e.history.push("/profile"),window.location.reload()})).catch((function(){r(!1)}))},children:Object(B.jsxs)(X.c,{children:[Object(B.jsxs)("div",{className:"form-group",children:[Object(B.jsx)("label",{htmlFor:"username",children:"Username"}),Object(B.jsx)(X.b,{name:"username",type:"text",className:"form-control"}),Object(B.jsx)(X.a,{name:"username",component:"div",className:"alert alert-danger"})]}),Object(B.jsxs)("div",{className:"form-group",children:[Object(B.jsx)("label",{htmlFor:"password",children:"Password"}),Object(B.jsx)(X.b,{name:"password",type:"password",className:"form-control"}),Object(B.jsx)(X.a,{name:"password",component:"div",className:"alert alert-danger"})]}),Object(B.jsx)("div",{className:"form-group",children:Object(B.jsxs)("button",{type:"submit",className:"btn btn-primary btn-block",disabled:s,children:[s&&Object(B.jsx)("span",{className:"spinner-border spinner-border-sm"}),Object(B.jsx)("span",{children:"Login"})]})})]})})]}),o&&Object(B.jsx)("div",{className:"form-group",children:Object(B.jsx)("div",{className:"alert alert-danger",role:"alert",children:o})})]})},je=function(){var e=Object(i.c)((function(e){return e.auth})).user;return e?Object(B.jsxs)("div",{className:"container",children:[Object(B.jsx)("header",{className:"jumbotron",children:Object(B.jsxs)("h3",{children:[Object(B.jsx)("strong",{children:e.username})," Profile"]})}),Object(B.jsxs)("p",{children:[Object(B.jsx)("strong",{children:"Token:"})," ",e.accessToken.substring(0,20)," ..."," ",e.accessToken.substr(e.accessToken.length-20)]}),Object(B.jsxs)("p",{children:[Object(B.jsx)("strong",{children:"Id:"})," ",e.id]}),Object(B.jsxs)("p",{children:[Object(B.jsx)("strong",{children:"Email:"})," ",e.email]}),Object(B.jsx)("strong",{children:"Authorities:"}),Object(B.jsx)("ul",{children:e.roles&&e.roles.map((function(e,t){return Object(B.jsx)("li",{children:e},t)}))})]}):Object(B.jsx)(V.a,{to:"/login"})},be=function(){var e=Object(c.useState)(!1),t=Object(l.a)(e,2),n=t[0],s=t[1],r=Object(i.c)((function(e){return e.message})).message,a=Object(i.b)();Object(c.useEffect)((function(){a(C())}),[a]);var o=Z.b().shape({username:Z.c().test("len","The username must be between 3 and 20 characters.",(function(e){return e&&e.toString().length>=3&&e.toString().length<=20})).required("This field is required!"),email:Z.c().email("This is not a valid email.").required("This field is required!"),password:Z.c().test("len","The password must be between 6 and 40 characters.",(function(e){return e&&e.toString().length>=6&&e.toString().length<=40})).required("This field is required!")});return Object(B.jsxs)("div",{className:"col-md-12 signup-form",children:[Object(B.jsxs)("div",{className:"card card-container",children:[Object(B.jsx)("img",{src:"//ssl.gstatic.com/accounts/ui/avatar_2x.png",alt:"profile-img",className:"profile-img-card"}),Object(B.jsx)(X.d,{initialValues:{username:"",email:"",password:""},validationSchema:o,onSubmit:function(e){var t=e.username,n=e.email,c=e.password;s(!1),a(ae({username:t,email:n,password:c})).unwrap().then((function(){s(!0)})).catch((function(){s(!1)}))},children:Object(B.jsx)(X.c,{children:!n&&Object(B.jsxs)("div",{children:[Object(B.jsxs)("div",{className:"form-group",children:[Object(B.jsx)("label",{htmlFor:"username",children:"Username"}),Object(B.jsx)(X.b,{name:"username",type:"text",className:"form-control"}),Object(B.jsx)(X.a,{name:"username",component:"div",className:"alert alert-danger"})]}),Object(B.jsxs)("div",{className:"form-group",children:[Object(B.jsx)("label",{htmlFor:"email",children:"Email"}),Object(B.jsx)(X.b,{name:"email",type:"email",className:"form-control"}),Object(B.jsx)(X.a,{name:"email",component:"div",className:"alert alert-danger"})]}),Object(B.jsxs)("div",{className:"form-group",children:[Object(B.jsx)("label",{htmlFor:"password",children:"Set Password"}),Object(B.jsx)(X.b,{name:"password",type:"text",className:"form-control"}),Object(B.jsx)(X.a,{name:"password",component:"div",className:"alert alert-danger"})]}),Object(B.jsx)("div",{className:"form-group",children:Object(B.jsx)("button",{type:"submit",className:"btn btn-primary btn-block",children:"Create"})})]})})})]}),r&&Object(B.jsx)("div",{className:"form-group",children:Object(B.jsx)("div",{className:n?"alert alert-success":"alert alert-danger",role:"alert",children:r})})]})},me=function(){var e=Object(c.useState)(""),t=Object(l.a)(e,2),n=t[0],s=t[1],r=Object(i.c)((function(e){return e.tasks})),a=Object(i.c)((function(e){return e.client})),o=Object(i.c)((function(e){return e.user})),d=o.reviewers,u=o.users,b=Object(i.b)(),m=Object(i.c)((function(e){return e.auth})).user,p=Object(c.useState)(!1),h=Object(l.a)(p,2),O=h[0],f=h[1],x=Object(c.useCallback)((function(){a.length||b(_()),d.length||b(H()),u.length||b(G()),b(E())}),[b]);Object(c.useEffect)((function(){m&&m.roles.includes("ROLE_ADMIN")?f(!0):f(!1)}),[m]),Object(c.useEffect)((function(){x()}),[x]);return Object(B.jsxs)("div",{className:" row",children:[Object(B.jsx)("div",{className:"col-md-12",children:Object(B.jsxs)("div",{className:"input-group mb-3",children:[Object(B.jsx)("input",{type:"text",className:"form-control",placeholder:"Search by description",value:n,onChange:function(e){var t=e.target.value;s(t)}}),Object(B.jsx)("div",{className:"input-group-append",children:Object(B.jsx)("button",{className:"btn btn-outline-secondary",type:"button",onClick:function(){b(M({description:n}))},children:"Search"})})]})}),Object(B.jsxs)("div",{className:"col-md-12 table-responsive-md",children:[Object(B.jsx)("h4",{children:"Task List"}),r&&Object(B.jsxs)("table",{className:"table table-striped",children:[Object(B.jsx)("thead",{children:Object(B.jsxs)("tr",{children:[Object(B.jsx)("th",{scope:"col",children:"#"}),O&&Object(B.jsx)("th",{scope:"col",children:"User"}),Object(B.jsx)("th",{scope:"col",children:"Client"}),Object(B.jsx)("th",{scope:"col",children:"Desc"}),Object(B.jsx)("th",{scope:"col",children:"Date"}),Object(B.jsx)("th",{scope:"col",children:"Time Spent"}),Object(B.jsx)("th",{scope:"col",children:"Status"}),Object(B.jsx)("th",{scope:"col",children:"Reviewer"}),Object(B.jsx)("th",{scope:"col",colSpan:"2",children:"Actions"})]})}),Object(B.jsx)("tbody",{children:r.map((function(e,t){var n="";a.map((function(t){return t.id===e.clientId&&(n=t.name),!0}));var c="",s="";return d.map((function(t){return t.id===e.reviewerId&&(c=t.username),!0})),O&&u.map((function(t){return t.id===e.userId&&(s=t.username),!0})),Object(B.jsxs)("tr",{className:e.completed?"table-success":"table-warning",children:[Object(B.jsx)("td",{children:t+1}),O&&Object(B.jsx)("td",{children:s}),Object(B.jsx)("td",{children:n}),Object(B.jsx)("td",{children:e.description.substr(0,10)}),Object(B.jsx)("td",{children:j()(e.date).format("DD/MM/yyyy")}),Object(B.jsxs)("td",{children:[e.minutesSpent," mins"]}),Object(B.jsx)("td",{children:e.completed?"Completed":"In-Progress"}),Object(B.jsx)("td",{children:c}),Object(B.jsx)("td",{colSpan:"2",children:Object(B.jsxs)("div",{style:{display:"inline-flex"},children:[Object(B.jsx)(P.c,{to:"/tasks/"+e.id,className:"btn btn-sm btn-warning mr-2 mt-0",children:"Edit"}),Object(B.jsx)("button",{className:"btn btn-sm btn-danger mr-2 mt-0",onClick:function(){return t=e.id,void(window.confirm("Are you sure you want to delete the task ?")&&b(R({id:t})).unwrap().catch((function(e){console.log(e)})));var t},children:"Delete"})]})})]},"task-row-".concat(t))}))})]})]}),0===r.length?Object(B.jsx)("h5",{className:"text-center text-info",children:"No Records Found"}):Object(B.jsx)("button",{className:"m-3 btn btn-sm btn-danger",onClick:function(){window.confirm("Are you sure you want to delete all tasks ?")&&b(q()).catch((function(e){console.log(e)}))},children:"Remove All"})]})},pe=n(13),he=Object(pe.a)(),Oe=n(100),fe=function(){var e=Object(c.useState)(!1),t=Object(l.a)(e,2),n=t[0],r=t[1],a=Object(i.c)((function(e){return e.auth})).user,o=Object(i.b)();Object(c.useEffect)((function(){he.listen((function(e){o(C())}))}),[o]);var d=Object(c.useCallback)((function(){o(le())}),[o]);return Object(c.useEffect)((function(){return r(!!a&&a.roles.includes("ROLE_ADMIN")),J.on("logout",(function(){d()})),function(){J.remove("logout")}}),[a,d]),Object(B.jsx)(P.a,{history:he,children:Object(B.jsxs)("div",{children:[Object(B.jsxs)("nav",{className:"navbar navbar-expand-md bg-dark navbar-dark",children:[Object(B.jsx)(P.c,{to:"/",className:"navbar-brand",children:"KRMN & Associates"}),Object(B.jsx)("button",{className:"navbar-toggler",type:"button","data-toggle":"collapse","aria-expanded":"false","data-target":"#collapsibleNavbar",children:Object(B.jsx)("span",{className:"navbar-toggler-icon"})}),Object(B.jsxs)("div",{className:"collapse navbar-collapse",id:"collapsibleNavbar",children:[Object(B.jsx)("ul",{className:"navbar-nav mr-auto",children:a&&Object(B.jsxs)(s.a.Fragment,{children:[Object(B.jsx)("li",{className:"nav-item",children:Object(B.jsx)(P.c,{to:"/taskList",className:"nav-link",children:"Task List"})}),Object(B.jsx)("li",{className:"nav-item",children:Object(B.jsx)(P.c,{to:"/addTask",className:"nav-link",children:"Add Task"})}),n&&Object(B.jsx)("li",{className:"nav-item",children:Object(B.jsx)(P.c,{to:"/register",className:"nav-link",children:"Add Staff"})})]})}),Object(B.jsx)("ul",{className:"navbar-nav mr",children:a?Object(B.jsxs)(s.a.Fragment,{children:[Object(B.jsx)("li",{className:"nav-item mr-auto",children:Object(B.jsx)(P.c,{to:"/profile",className:"nav-link",children:Object(Oe.capitalize)(a.username)})}),Object(B.jsx)("li",{className:"nav-item",children:Object(B.jsx)("a",{href:"/login",className:"nav-link",onClick:d,children:"LogOut"})})]}):Object(B.jsx)(s.a.Fragment,{children:Object(B.jsx)("li",{className:"nav-item",children:Object(B.jsx)(P.c,{to:"/login",className:"nav-link",children:"Login"})})})})]})]}),Object(B.jsx)("div",{className:"container mt-3",children:Object(B.jsxs)(V.d,{children:[Object(B.jsx)(V.b,{exact:!0,path:["/","/home"],component:ce}),Object(B.jsx)(V.b,{exact:!0,path:"/login",component:ue}),Object(B.jsx)(V.b,{exact:!0,path:"/register",component:be}),Object(B.jsx)(V.b,{exact:!0,path:"/profile",component:je}),Object(B.jsx)(V.b,{path:"/taskList",component:me}),Object(B.jsx)(V.b,{path:"/addTask",component:ee}),Object(B.jsx)(V.b,{path:"/mod",component:ne}),Object(B.jsx)(V.b,{path:"/admin",component:te}),Object(B.jsx)(V.b,{path:"/tasks/:id",component:Y})]})})]})})},xe={auth:de,message:A,tasks:U,user:Q,client:K},ve=Object(k.a)({reducer:xe,devTools:!0});a.a.render(Object(B.jsx)(i.a,{store:ve,children:Object(B.jsx)(P.b,{basename:"/#",children:Object(B.jsx)(fe,{})})}),document.getElementById("root"))}},[[230,1,2]]]);
//# sourceMappingURL=main.2290e0ba.chunk.js.map